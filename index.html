<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>臺北市北投區文林國民小學附設幼兒園</title>
    <!-- 載入 Tailwind CSS 函式庫 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Klee One (手寫簡約風) 和 Inter (內文清晰用) 字體 -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Klee+One:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            /* 內文使用清晰的 Inter */
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        /* New style for main headings using the handwriting font */
        .handwriting-font {
            /* 標題使用手寫風格的 Klee One */
            font-family: 'Klee One', cursive;
        }
        /* 自定義一個柔和的背景圖案 (淺米白/奶油色) */
        .hero-bg {
            background-color: #fcf9f2; /* Light Cream/Beige */
            background-image: radial-gradient(#ffffff 1px, transparent 1px),
                              radial-gradient(#ffffff 1px, #fcf9f2 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }
        /* 活躍 Tab 樣式 (茶綠色) */
        .tab-active {
            border-bottom: 3px solid #0f766e; /* Teal-700 */
            color: #0f766e; /* Teal-700 */
            font-weight: 700;
        }
        /* 表格樣式 */
        .data-table th, .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
            text-align: left;
        }
        /* 隱藏原生 Radio Button */
        .class-radio input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        /* Radio Button 視覺效果 */
        .class-radio label {
            display: block;
            padding: 8px 12px;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e5e7eb;
            background-color: #f3f4f6;
        }
        .class-radio input[type="radio"]:checked + label {
            background-color: #0f766e; /* Teal-700 */
            color: white;
            border-color: #0f766e;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="text-stone-700">
    
    <!-- 導覽列 (Header) -->
    <header class="sticky top-0 z-50 bg-white shadow-xl">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                
                <!-- Logo/臺北市北投區文林國民小學附設幼兒園 - 已放大字體 -->
                <a href="#home" class="flex items-center space-x-2">
                    <!-- 使用 SVG 建立一個文林附幼 Logo (茶綠色) -->
                    <svg class="w-10 h-10 text-teal-700" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                    </svg>
                    <!-- 標題文字已更新並放大至 text-3xl (手機) md:text-4xl (桌面) -->
                    <span class="text-3xl md:text-4xl font-bold text-stone-800 handwriting-font">臺北市北投區文林國民小學附設幼兒園</span>
                </a>

                <!-- 導覽連結 (桌面版) -->
                <nav class="hidden lg:flex space-x-8 text-lg">
                    <a href="#home" class="text-stone-600 hover:text-teal-700 transition duration-150 font-medium">首頁簡介</a>
                    <a href="#news" class="text-stone-600 hover:text-teal-700 transition duration-150 font-medium">最新公告</a>
                    <a href="#about" class="text-stone-600 hover:text-teal-700 transition duration-150 font-medium">關於我們</a>
                    <a href="#gallery" class="text-stone-600 hover:text-teal-700 transition duration-150 font-medium">活動花絮</a>
                    <a href="#admin" class="px-4 py-2 bg-amber-600 text-white rounded-full hover:bg-amber-700 transition duration-150 font-medium shadow-md">行政服務</a>
                </nav>

                <!-- 手機版選單按鈕 (留空，因為單頁應用) -->
                <button class="lg:hidden text-stone-500 hover:text-teal-700">
                    <!-- Menu Icon -->
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
    </header>

    <main>
        
        <!-- 1. 首頁焦點區 (Hero Section) & 幼兒園簡介 (環境介紹、教學理念) -->
        <section id="home" class="hero-bg py-16 sm:py-24 lg:py-32">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <div class="lg:w-3/4 mx-auto">
                    <h2 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-stone-800 leading-tight mb-4 handwriting-font">
                        <span class="text-amber-600">閱讀自然</span>
                    </h2>
                    <p class="text-xl sm:text-2xl text-stone-600 mb-8">
                        和孩子一起創造安全、多元、快樂的學習環境。
                    </p>
                    <div class="mt-12 w-full max-w-5xl mx-auto rounded-xl overflow-hidden shadow-2xl">
                        <!-- 圖片使用大地色系 Placeholder -->
                        <img src="https://placehold.co/1000x450/d9f99d/4d7c0f?text=文林附幼+校園鳥瞰圖" 
                             alt="文林附幼環境鳥瞰圖" 
                             class="w-full h-auto object-cover">
                    </div>
                </div>
            </div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-16">
                <!-- 簡介卡片區 -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    
                    <!-- 環境介紹 (茶綠色邊框) -->
                    <div class="bg-white p-8 rounded-3xl shadow-xl border-t-4 border-teal-500">
                        <h3 class="text-3xl font-extrabold text-teal-700 mb-4 handwriting-font">🏡 環境介紹</h3>
                        <p class="text-stone-600 mb-4">
                            幼兒園位於文林國小校區內，享有寬廣的戶外空間和資源。我們擁有獨立的遊戲場、沙坑、生態園區和陽光充足的活動室。所有的設施均通過安全檢驗，為幼兒提供一個無憂無慮的探索天地。
                        </p>
                        <ul class="text-sm text-stone-500 space-y-2 list-disc list-inside">
                            <li>多功能體能活動室</li>
                            <li>豐富的主題學習區</li>
                            <li>專屬的午睡與用餐區域</li>
                        </ul>
                    </div>
                    
                    <!-- 教學理念 (琥珀色邊框) -->
                    <div class="bg-white p-8 rounded-3xl shadow-xl border-t-4 border-amber-500">
                        <h3 class="text-3xl font-extrabold text-amber-700 mb-4 handwriting-font">💡 教學理念</h3>
                        <p class="text-stone-600 mb-4">
                            我們採學習區模式，以幼兒的生活經驗為核心，引導孩子從「做中學」。我們注重培養幼兒各個不同面向的能力，鼓勵孩子成為主動的學習者。
                        </p>
                        <ul class="text-sm text-stone-500 space-y-2 list-disc list-inside">
                            <li>以幼兒為中心的教學法</li>
                            <li>鼓勵動手操作與合作學習</li>
                            <li>重視生活自理能力與情商發展</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. 最新公告欄位 (News Section) -->
        <section id="news" class="py-16 sm:py-24 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <span class="text-sm font-semibold text-teal-700 uppercase tracking-wider">最新資訊</span>
                <h3 class="mt-2 text-3xl font-extrabold text-stone-800 sm:text-4xl mb-10 handwriting-font">
                    📢 文林附幼公告欄
                </h3>

                <div id="public-announcement-list" class="space-y-4">
                    <!-- 公告將由 JS 渲染 -->
                    <p class="text-stone-500 text-center">正在載入公告...</p>
                </div>
                
                <button class="mt-8 px-6 py-2 text-teal-700 font-semibold border border-teal-300 rounded-full hover:bg-teal-50 transition duration-150">
                    查看所有公告
                </button>
            </div>
        </section>

        <!-- 3. 關於我們 (About Us) - 使用 Tab 切換：行事曆、作息表、教職員介紹及班級網頁 -->
        <section id="about" class="py-16 sm:py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h3 class="text-3xl font-extrabold text-stone-800 sm:text-4xl mb-10 text-center handwriting-font">
                    📖 關於我們與行政資訊
                </h3>

                <!-- Tab 導覽列 (使用大地色系 hover 效果) -->
                <div id="about-tabs" class="flex flex-wrap justify-center border-b border-gray-200 mb-8 space-x-4 sm:space-x-8">
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700 tab-active" onclick="showAboutTab('calendar')">行事曆</button>
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700" onclick="showAboutTab('schedule')">作息表</button>
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700" onclick="showAboutTab('staff')">教職員介紹</button>
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700" onclick="showAboutTab('classes')">班級網頁</button>
                </div>

                <!-- Tab 內容區 -->
                <div id="about-content">
                    
                    <!-- 行事曆內容 (Default Tab) -->
                    <div id="calendar" class="tab-content bg-yellow-50 p-6 rounded-xl shadow-inner">
                        <h4 class="text-2xl font-bold text-teal-700 mb-4 handwriting-font">學年重要行事曆 (範例)</h4>
                        <table class="data-table w-full bg-white rounded-lg shadow-sm">
                            <thead>
                                <tr class="bg-teal-100 text-teal-800">
                                    <th>日期</th>
                                    <th>活動名稱</th>
                                    <th>備註</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>2025/08/29</td><td>新生家長座談會</td><td>上午 10:00，活動中心</td></tr>
                                <tr><td>2025/09/01</td><td>正式開學日</td><td>歡迎所有幼兒返校</td></tr>
                                <tr><td>2025/10/10</td><td>雙十國慶</td><td>放假一日</td></tr>
                                <tr><td>2025/12/24</td><td>聖誕節聯歡會</td><td>下午活動，家長可參與</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 作息表內容 -->
                    <div id="schedule" class="tab-content hidden bg-yellow-50 p-6 rounded-xl shadow-inner">
                        <h4 class="text-2xl font-bold text-teal-700 mb-4 handwriting-font">幼兒園一日作息表 (範例)</h4>
                        <table class="data-table w-full bg-white rounded-lg shadow-sm">
                            <thead>
                                <tr class="bg-teal-100 text-teal-800">
                                    <th>時間</th>
                                    <th>內容</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>08:00 - 08:30</td><td>入園與晨間活動</td></tr>
                                <tr><td>08:30 - 09:00</td><td>健康檢查與點心時間</td></tr>
                                <tr><td>09:00 - 10:30</td><td>主題課程與角落活動</td></tr>
                                <tr><td>10:30 - 11:30</td><td>戶外體能遊戲</td></tr>
                                <tr><td>12:00 - 13:00</td><td>午餐與餐後整理</td></tr>
                                <tr><td>13:00 - 14:30</td><td>午睡時間</td></tr>
                                <tr><td>15:00 - 16:00</td><td>點心與學習回顧</td></tr>
                                <tr><td>16:00 - 17:00</td><td>放學與彈性活動</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 教職員介紹內容 (結構已更新) -->
                    <div id="staff" class="tab-content hidden p-6">
                        <h4 class="text-2xl font-bold text-teal-700 mb-6 handwriting-font">教職員團隊</h4>

                        <h5 class="text-xl font-bold text-stone-800 mt-6 mb-4 border-b border-teal-300 pb-2">行政人員 (Administrative Staff)</h5>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                            <!-- 幼兒園主任 -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-amber-400">
                                <img src="https://placehold.co/100x100/fec7b3/f59e0b?text=園主任" alt="園主任" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">李雅雯 主任</p>
                                <p class="text-sm text-amber-700">幼兒園主任</p>
                            </div>
                            <!-- 行政教保員 -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-amber-400">
                                <img src="https://placehold.co/100x100/fec7b3/f59e0b?text=行政教保員" alt="行政教保員" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">王志明 教保員</p>
                                <p class="text-sm text-amber-700">行政教保員</p>
                            </div>
                            <!-- 廚工 1 (佔位符) -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-stone-400">
                                <img src="https://placehold.co/100x100/e7e5e4/57534e?text=廚工1" alt="廚工" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">陳美華 廚工</p>
                                <p class="text-sm text-stone-600">廚工</p>
                            </div>
                            <!-- 廚工 2 (佔位符) -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-stone-400">
                                <img src="https://placehold.co/100x100/e7e5e4/57534e?text=廚工2" alt="廚工" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">林淑芬 廚工</p>
                                <p class="text-sm text-stone-600">廚工</p>
                            </div>
                            <!-- 廚工 3 (佔位符) -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-stone-400">
                                <img src="https://placehold.co/100x100/e7e5e4/57534e?text=廚工3" alt="廚工" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">張文英 廚工</p>
                                <p class="text-sm text-stone-600">廚工</p>
                            </div>
                        </div>

                        <h5 class="text-xl font-bold text-stone-800 mt-8 mb-4 border-b border-teal-300 pb-2">班級教師 (Class Teachers)</h5>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                            <!-- 班級教師範例 1 (2人一班，8班共16人) -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-teal-400">
                                <img src="https://placehold.co/100x100/bae6fd/0e7490?text=太陽班+師" alt="太陽班老師" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">黃小潔 老師</p>
                                <p class="text-sm text-teal-700">太陽班教師</p>
                            </div>
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-teal-400">
                                <img src="https://placehold.co/100x100/bae6fd/0e7490?text=藍天班+師" alt="藍天班老師" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">吳大衛 老師</p>
                                <p class="text-sm text-teal-700">藍天班教師</p>
                            </div>
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-teal-400">
                                <img src="https://placehold.co/100x100/bae6fd/0e7490?text=彩虹班+師" alt="彩虹班老師" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">劉心語 老師</p>
                                <p class="text-sm text-teal-700">彩虹班教師</p>
                            </div>
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-teal-400">
                                <img src="https://placehold.co/100x100/bae6fd/0e7490?text=朵朵班+師" alt="朵朵班老師" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">鄭美玲 老師</p>
                                <p class="text-sm text-teal-700">朵朵班教師</p>
                            </div>
                            <div class="col-span-4 text-center text-sm text-stone-500 pt-4">
                                (註：本園共有 8 個班級，共 16 位專任教師，此處僅列舉部分範例)
                            </div>
                        </div>

                        <h5 class="text-xl font-bold text-stone-800 mt-8 mb-4 border-b border-teal-300 pb-2">其他人力資源 (Other Staff)</h5>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                            <!-- 實習生 (佔位符) -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-green-400">
                                <img src="https://placehold.co/100x100/d9f99d/4d7c0f?text=實習生" alt="實習生" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">實習生</p>
                                <p class="text-sm text-green-700">依當學期配置</p>
                            </div>
                            <!-- 特教助理員 (佔位符) -->
                            <div class="bg-white p-4 text-center rounded-xl shadow-md border-t-2 border-green-400">
                                <img src="https://placehold.co/100x100/d9f99d/4d7c0f?text=特教助理員" alt="特教助理員" class="rounded-full w-24 h-24 mx-auto mb-3 object-cover">
                                <p class="font-bold text-stone-800">特教助理員</p>
                                <p class="text-sm text-green-700">依需求配置</p>
                            </div>
                        </div>
                    </div>

                    <!-- 班級網頁內容 (班級名稱已確認) -->
                    <div id="classes" class="tab-content hidden bg-yellow-50 p-6 rounded-xl shadow-inner">
                        <h4 class="text-2xl font-bold text-teal-700 mb-6 handwriting-font">各班級學習資源與網頁連結</h4>
                        <div class="space-y-4">
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-teal-600">☀️ 太陽班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-green-700">☁️ 藍天班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-amber-700">🤍 白雲班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-teal-600">🌙 月亮班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-green-700">⭐ 星星班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-amber-700">🌱 荳荳班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-teal-600">🌸 朵朵班 - 點此進入班級網頁</a>
                            <a href="#" class="block p-4 bg-white rounded-lg shadow hover:bg-gray-100 transition duration-150 font-semibold text-green-700">🌈 彩虹班 - 點此進入班級網頁</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- 4. 全園活動花絮 (Gallery) - 獨立頁面連結 -->
        <section id="gallery" class="py-16 sm:py-24 hero-bg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <span class="text-sm font-semibold text-amber-600 uppercase tracking-wider">成長瞬間</span>
                <h3 class="mt-2 text-3xl font-extrabold text-stone-800 sm:text-4xl mb-8 handwriting-font">
                    📸 2024-2025 學年全園活動花絮
                </h3>

                <p class="text-lg text-stone-600 mb-8 max-w-2xl mx-auto">
                    點擊下方按鈕，連結至 Google 相簿或學校相簿系統，查看最新的全園活動照片和孩子們的精彩瞬間。
                </p>
                
                <!-- 獨立頁面連結按鈕 -->
                <a href="https://example.com/wenlin-kdg-album" target="_blank" 
                   class="mt-6 inline-block px-10 py-4 text-xl font-bold text-white bg-teal-600 rounded-full shadow-lg hover:bg-teal-700 transition duration-300 transform hover:scale-105">
                    點此進入全園相簿連結 →
                </a>
            </div>
        </section>

        <!-- 5. 行政服務 (Admin Forms) - 使用 Tab 切換：線上請假、託藥辦法及託藥申請 -->
        <section id="admin" class="py-16 sm:py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                 <h3 class="text-3xl font-extrabold text-stone-800 sm:text-4xl mb-10 text-center handwriting-font">
                    📋 家長行政服務區
                </h3>

                <!-- Tab 導覽列 -->
                <div id="admin-tabs" class="flex flex-wrap justify-center border-b border-gray-200 mb-8 space-x-4 sm:space-x-8">
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700 tab-active" onclick="showAdminTab('leave')">線上請假表單</button>
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700" onclick="showAdminTab('policy')">託藥辦法</button>
                    <button class="py-3 px-3 text-stone-600 hover:text-teal-700" onclick="showAdminTab('medication')">託藥申請表</button>
                </div>
                
                <!-- Tab 內容區 -->
                <div id="admin-content" class="bg-yellow-50 p-8 rounded-xl shadow-2xl">
                    
                    <!-- 線上請假表單 (Default Tab) - 已新增欄位及區間式日期 -->
                    <div id="leave" class="tab-content-admin">
                        <h4 class="text-2xl font-bold text-teal-700 mb-6 handwriting-font">幼兒線上請假通知單 (模擬)</h4>
                        <form id="leave-form" onsubmit="handleLeaveSubmit(event)">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">家長姓名</label>
                                    <input type="text" name="parentName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="請輸入家長全名" required>
                                </div>
                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">家長與幼兒關係</label>
                                    <input type="text" name="relationship" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="例如：爸爸/媽媽/祖母" required>
                                </div>
                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">幼兒姓名</label>
                                    <input type="text" name="childName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="請輸入幼兒全名" required>
                                </div>

                                <!-- 班級勾選 (單選) 欄位 -->
                                <fieldset>
                                    <legend class="block text-stone-700 font-medium mb-1">幼兒班級 (請單選)</legend>
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 class-radio">
                                        <input type="radio" id="l-class-sun" name="className" value="太陽班" required><label for="l-class-sun">☀️ 太陽班</label>
                                        <input type="radio" id="l-class-sky" name="className" value="藍天班"><label for="l-class-sky">☁️ 藍天班</label>
                                        <input type="radio" id="l-class-cloud" name="className" value="白雲班"><label for="l-class-cloud">🤍 白雲班</label>
                                        <input type="radio" id="l-class-moon" name="className" value="月亮班"><label for="l-class-moon">🌙 月亮班</label>
                                        <input type="radio" id="l-class-star" name="className" value="星星班"><label for="l-class-star">⭐ 星星班</label>
                                        <input type="radio" id="l-class-bean" name="className" value="荳荳班"><label for="l-class-bean">🌱 荳荳班</label>
                                        <input type="radio" id="l-class-flower" name="className" value="朵朵班"><label for="l-class-flower">🌸 朵朵班</label>
                                        <input type="radio" id="l-class-rainbow" name="className" value="彩虹班"><label for="l-class-rainbow">🌈 彩虹班</label>
                                    </div>
                                </fieldset>

                                <!-- 區間式請假日期 -->
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">請假開始日</label>
                                        <input type="date" name="startDate" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" required>
                                    </div>
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">請假結束日</label>
                                        <input type="date" name="endDate" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" required>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">請假原因</label>
                                    <textarea name="reason" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" rows="3" placeholder="例如：發燒、家庭旅遊、事假" required></textarea>
                                </div>
                                <button type="submit" class="w-full py-3 bg-teal-700 text-white font-bold rounded-lg hover:bg-teal-800 transition duration-150 shadow-md">
                                    送出請假申請
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- 託藥辦法內容 -->
                    <div id="policy" class="tab-content-admin hidden">
                        <h4 class="text-2xl font-bold text-teal-700 mb-6 handwriting-font">💊 幼兒園委託幼兒服藥辦法</h4>
                        <div class="bg-white p-6 rounded-lg shadow-inner space-y-4 text-stone-700">
                            <p class="font-bold">一、基本原則：</p>
                            <p class="pl-4">幼兒服藥以在家自行服藥為原則，如因特殊疾病或療程需要，家長需填寫本園之「託藥申請表」。</p>
                            <p class="font-bold">二、託藥要求：</p>
                            <ul class="list-disc list-inside pl-4 space-y-2">
                                <li>藥品必須由**醫師開立**，並附有完整的藥袋、藥名、劑量、服藥時間及幼兒姓名。</li>
                                <li>園方僅協助餵食**當次劑量**，不接受自行分裝或非處方藥物（如：維他命、中藥材）。</li>
                                <li>藥物必須是**當日且當次**的劑量，不可存放隔夜藥。</li>
                            </ul>
                            <p class="font-bold">三、服藥流程：</p>
                            <p class="pl-4">幼兒入園時，由家長親自將藥品交給導師或保健人員，並簽署託藥單。服藥後，園方將記錄服藥情況。</p>
                        </div>
                    </div>

                    <!-- 託藥申請表內容 - 已新增欄位及教師回覆區 -->
                    <div id="medication" class="tab-content-admin hidden">
                        <h4 class="text-2xl font-bold text-teal-700 mb-6 handwriting-font">藥品委託管理申請表 (模擬)</h4>
                        <form id="medication-form" onsubmit="handleMedicationSubmit(event)">
                             <div class="space-y-4">
                                <!-- 幼兒班級/姓名 -->
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">幼兒班級 (請單選)</label>
                                        <select name="className" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" required>
                                            <option value="">請選擇</option>
                                            <option value="太陽班">☀️ 太陽班</option>
                                            <option value="藍天班">☁️ 藍天班</option>
                                            <option value="白雲班">🤍 白雲班</option>
                                            <option value="月亮班">🌙 月亮班</option>
                                            <option value="星星班">⭐ 星星班</option>
                                            <option value="荳荳班">🌱 荳荳班</option>
                                            <option value="朵朵班">🌸 朵朵班</option>
                                            <option value="彩虹班">🌈 彩虹班</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">幼兒姓名</label>
                                        <input type="text" name="childName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="請輸入幼兒全名" required>
                                    </div>
                                </div>

                                <!-- 用藥日期/病名 -->
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">用藥日期</label>
                                        <input type="date" name="date" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" required>
                                    </div>
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">病名或病徵</label>
                                        <input type="text" name="symptoms" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="例如：感冒咳嗽、輕微發燒" required>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">藥品名稱 (需與藥袋一致)</label>
                                    <input type="text" name="drugName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="例如：安佳熱口服液" required>
                                </div>
                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">服藥時間</label>
                                    <input type="text" name="time" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="例如：午餐後 12:30" required>
                                </div>
                                
                                <!-- 家長備註與 Email -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="flex items-center space-x-2 p-3 bg-white rounded-lg border border-gray-300">
                                        <input id="refrigeration" name="refrigeration" type="checkbox" class="h-5 w-5 text-teal-600 border-gray-300 rounded focus:ring-teal-500">
                                        <label for="refrigeration" class="text-stone-700 font-medium">藥品是否需冷藏？ (家長備註)</label>
                                    </div>
                                    <div>
                                        <label class="block text-stone-700 font-medium mb-1">家長收訊息 Email</label>
                                        <input type="email" name="parentEmail" id="parent-email" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="用於接收老師餵藥回覆" required>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-stone-700 font-medium mb-1">家長簽名</label>
                                    <input type="text" name="parentSignature" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500" placeholder="請輸入家長姓名代表簽名" required>
                                </div>

                                <button type="submit" class="w-full py-3 bg-amber-600 text-white font-bold rounded-lg hover:bg-amber-700 transition duration-150 shadow-md">
                                    送出託藥申請
                                </button>
                            </div>
                        </form>
                        
                        <!-- 教師餵藥後的回覆功能 (模擬教師填寫介面 - 已移除，避免混淆) -->
                        <div class="mt-8 p-4 bg-teal-100 rounded-xl border-2 border-teal-300">
                            <p class="text-stone-700 font-semibold">教師回覆介面提示：</p>
                            <p class="text-sm text-stone-600 mt-1">
                                在真實系統中，老師將透過**獨立的後台網頁**（如 `teacher_admin_panel.html`）登入，並在專門的管理介面中查看此託藥單並進行回覆。
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </section>


    </main>

    <!-- 6. 頁腳 (Footer) & 聯絡資訊 -->
    <footer id="contact" class="bg-stone-700 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 border-b border-stone-600 pb-8 mb-8">
                
                <!-- 關於學校 -->
                <div>
                    <h5 class="text-xl font-bold mb-4 text-amber-300 handwriting-font">文林附幼</h5>
                    <p class="text-stone-300 text-sm">
                        我們承諾提供最優質的學前教育，為每個孩子在未來的小學生活打下堅實的基礎。
                    </p>
                </div>

                <!-- 聯絡資訊 -->
                <div>
                    <h5 class="text-xl font-bold mb-4 text-amber-300 handwriting-font">聯絡我們</h5>
                    <p class="text-stone-300">📞 (02) 1234-5678 (學校總機)</p>
                    <p class="text-stone-300">📧 wenlin.kdg@tp.edu.tw</p>
                    <p class="text-stone-300 mt-2">📍 臺北市北投區文林北路 155 號 (文林國小內)</p>
                </div>

                <!-- 快速連結 -->
                <div>
                    <h5 class="text-xl font-bold mb-4 text-amber-300 handwriting-font">行政資源</h5>
                    <ul class="space-y-2">
                        <li><a href="#admin" onclick="showAdminTab('leave')" class="text-stone-300 hover:text-white transition duration-150">線上請假</a></li>
                        <li><a href="#admin" onclick="showAdminTab('policy')" class="text-stone-300 hover:text-white transition duration-150">託藥辦法</a></li>
                        <li><a href="#news" class="text-stone-300 hover:text-white transition duration-150">最新消息</a></li>
                        <!-- 新增教師登入連結 -->
                         <li><a href="teacher_admin_panel.html" target="_blank" class="text-stone-300 hover:text-amber-400 transition duration-150">🧑‍🏫 教師後台登入</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- 版權聲明 -->
            <div class="text-center text-sm text-stone-400 pt-4">
                &copy; 2024 臺北市北投區文林國民小學附設幼兒園. 設計：程式夥伴
            </div>
        </div>
    </footer>

    <script>
        const LEAVE_KEY = 'wenlin_leave_requests';
        const MEDICATION_KEY = 'wenlin_medication_requests';
        const ANNOUNCEMENT_KEY = 'wenlin_announcements';
        
        // --- 數據存取通用函數 ---
        function getRequests(key) {
            try {
                return JSON.parse(localStorage.getItem(key)) || [];
            } catch (e) {
                console.error("Error parsing data from localStorage:", e);
                return [];
            }
        }
        function saveRequests(key, requests) {
            localStorage.setItem(key, JSON.stringify(requests));
        }

        // --- 核心 Tab 切換邏輯 (通用) ---
        function showAboutTab(tabName) {
            document.querySelectorAll('#about-content .tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.querySelectorAll('#about-tabs button').forEach(button => {
                button.classList.remove('tab-active');
            });
            document.getElementById(tabName).classList.remove('hidden');
            document.querySelector(`#about-tabs button[onclick*="'${tabName}'"]`).classList.add('tab-active');
        }

        function showAdminTab(tabName) {
            document.querySelectorAll('#admin-content .tab-content-admin').forEach(content => {
                content.classList.add('hidden');
            });
            document.querySelectorAll('#admin-tabs button').forEach(button => {
                button.classList.remove('tab-active');
            });
            document.getElementById(tabName).classList.remove('hidden');
            document.querySelector(`#admin-tabs button[onclick*="'${tabName}'"]`).classList.add('tab-active');
            document.getElementById('admin').scrollIntoView({ behavior: 'smooth' });
        }

        // --- 公告渲染邏輯 ---
        function renderPublicAnnouncements() {
            // 從 localStorage 讀取教師發布的公告
            const announcements = getRequests(ANNOUNCEMENT_KEY);
            const listContainer = document.getElementById('public-announcement-list');
            listContainer.innerHTML = '';

            if (announcements.length === 0) {
                listContainer.innerHTML = `
                    <a href="#" class="block p-4 bg-white rounded-xl shadow border-l-4 border-teal-500">
                        <p class="text-stone-500 text-sm">【行政】${new Date().toLocaleDateString('zh-TW')}</p>
                        <p class="text-lg font-semibold text-stone-800">歡迎使用文林附幼模擬網站！</p>
                    </a>
                `;
                return;
            }

            // 只顯示前三個公告
            announcements.slice(0, 3).forEach(ann => {
                const tagColor = ann.tag === '重要' ? 'border-amber-500' : ann.tag === '活動' ? 'border-teal-500' : 'border-stone-500';
                const item = document.createElement('a');
                item.href = '#news'; // 點擊後捲動到公告區
                item.className = `block p-4 bg-white rounded-xl shadow hover:shadow-lg transition duration-300 border-l-4 ${tagColor}`;
                item.innerHTML = `
                    <p class="text-stone-500 text-sm">【${ann.tag}】${ann.date}</p>
                    <p class="text-lg font-semibold text-stone-800">${ann.title}</p>
                `;
                listContainer.appendChild(item);
            });
        }


        // --- 請假表單提交邏輯 (寫入 localStorage) ---
        function handleLeaveSubmit(event) {
            event.preventDefault(); 
            const form = event.target;
            const requests = getRequests(LEAVE_KEY);
            
            // 收集表單數據
            const newRequest = {
                id: Date.now(),
                parentName: form.parentName.value,
                relationship: form.relationship.value,
                childName: form.childName.value,
                className: form.className.value,
                startDate: form.startDate.value,
                endDate: form.endDate.value,
                reason: form.reason.value,
                status: '待審核', // 初始狀態
                timestamp: new Date().toISOString()
            };

            requests.unshift(newRequest);
            saveRequests(LEAVE_KEY, requests); // 儲存到 localStorage
            form.reset(); 

            const message = document.createElement('div');
            message.className = 'fixed bottom-5 right-5 p-4 bg-green-600 text-white rounded-lg shadow-xl z-50 transition duration-300';
            message.textContent = `請假申請已成功送出！請老師登入後台審核。`;
            document.body.appendChild(message);

            setTimeout(() => {
                message.remove();
            }, 3000);

            return false;
        }

        // --- 託藥表單提交邏輯 (寫入 localStorage) ---
        function handleMedicationSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const requests = getRequests(MEDICATION_KEY);

            // 收集表單數據
            const newRequest = {
                id: Date.now(),
                className: form.className.value,
                childName: form.childName.value,
                date: form.date.value,
                symptoms: form.symptoms.value,
                drugName: form.drugName.value,
                time: form.time.value,
                refrigeration: form.refrigeration.checked,
                parentEmail: form.parentEmail.value,
                parentSignature: form.parentSignature.value,
                teacherReply: null, // 初始回覆為 null
                timestamp: new Date().toISOString()
            };

            requests.unshift(newRequest);
            saveRequests(MEDICATION_KEY, requests); // 儲存到 localStorage
            form.reset();

            const message = document.createElement('div');
            message.className = 'fixed bottom-5 right-5 p-4 bg-green-600 text-white rounded-lg shadow-xl z-50 transition duration-300';
            message.textContent = `託藥申請已成功送出！請老師登入後台回覆。`;
            document.body.appendChild(message);
            
            setTimeout(() => {
                message.remove();
            }, 3000);

            return false;
        }

        // 頁面載入時初始化 Tab 和公告
        window.onload = function() {
            showAboutTab('calendar');
            showAdminTab('leave');
            renderPublicAnnouncements();
        };
    </script>

</body>
</html>
